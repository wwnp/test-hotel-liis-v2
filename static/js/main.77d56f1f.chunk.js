(this["webpackJsonptest-hotel-liis-v2"]=this["webpackJsonptest-hotel-liis-v2"]||[]).push([[0],{110:function(e,t,n){},111:function(e,t,n){},112:function(e,t,n){},114:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n(42),r=n(0),s=n(37),i=n(2),o=function(e){var t=e.size,n=void 0===t?"16px":t,c=e.isFav,a=e.onClick,o=!0===c?"red":"grey";return Object(i.jsx)(r.b.Provider,{value:{color:o,size:n},children:Object(i.jsx)("span",{onClick:a,children:Object(i.jsx)(s.b,{className:"pointer"})})})},l=function(e){var t=e.color,n=void 0===t?"yellow":t,c=e.size,a=void 0===c?"16px":c;return Object(i.jsx)(r.b.Provider,{value:{color:n,size:a},children:Object(i.jsx)("span",{children:Object(i.jsx)(s.a,{})})})},j=n(13),d=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,u=/.{8,}/,b={year:"numeric",month:"long",day:"numeric"},O="RATE",x="PRICE",p="/test-hotel-liis-v2/";function m(e){return e>=5?"\u0434\u043d\u0435\u0439":e>=2?"\u0434\u043d\u044f":"\u0434\u0435\u043d\u044c"}var h="SET_HOTELS",f="START_LOADING",v="END_LOADING",g="SET_REQUEST",y="SET_MODE_RATE",N="SET_MODE_PRICE",_="SET_FAV_APP",w="SET_FAV",S="CHANGE_PAGE",E="SET_PAGE",k=function(e){for(var t=e.hotel,n=Object(j.d)(),c=Object(j.e)((function(e){return e.homepage.request})),a=c.date,r=c.days,s=t.hotelName,d=t.stars,u=t.priceAvg,O=[],x=0;x<d;x++)O.push("gold");for(var p=5-O.length,h=0;h<p;h++)O.push("grey");return Object(i.jsxs)("div",{className:"d-flex justify-between align-center",style:{borderBottom:"1px solid #ccc",paddingBottom:"10px "},children:[Object(i.jsx)("div",{className:"d-flex align-center",children:Object(i.jsxs)("div",{children:[Object(i.jsx)("p",{className:"HomePage__FavName",children:s}),Object(i.jsxs)("p",{children:[new Date(a).toLocaleDateString("ru-RU",b)," -- ",r," ",m(r)]}),O.map((function(e,t){return Object(i.jsx)(l,{color:e},e+t+(new Date).toLocaleString())}))]})}),Object(i.jsxs)("div",{className:"d-flex flex-column align-end align-center",children:[Object(i.jsx)(o,{size:"24px",isFav:!0,onClick:function(){return n({type:_,payload:t})}}),Object(i.jsxs)("p",{className:"text-muted",children:["price: ",Object(i.jsxs)("span",{className:"HomePage__price ml-1",children:[parseInt(u),"p"]})]})]})]})},D=function(){var e,t=Object(j.d)(),n=Object(j.e)((function(e){return e.homepage.favs})),c=Object(j.e)((function(e){return e.homepage.favMode})),r=Object(j.e)((function(e){return e.homepage.page}));c===O&&(e=n.sort((function(e,t){return e.stars-t.stars}))),c===x&&(e=n.sort((function(e,t){return e.priceAvg-t.priceAvg}))),e.reverse();var s=e,o=3*r,l=o-3;return s=s.slice(l,o),Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("h2",{children:"\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435"}),Object(i.jsxs)("div",{className:"d-flex align-center",children:[Object(i.jsxs)("button",{className:"btn d-flex align-center mr-1 btn-sm ".concat(c===O&&"btn-active"),onClick:function(){return t({type:y})},children:["\u0420\u0435\u0439\u0442\u0438\u043d\u0433 ",Object(i.jsx)(a.a,{})]}),Object(i.jsxs)("button",{className:"btn d-flex align-center btn-sm ".concat(c===x&&"btn-active"),onClick:function(){return t({type:N})},children:["\u0426\u0435\u043d\u0430 ",Object(i.jsx)(a.a,{})]})]}),Object(i.jsx)("div",{className:"HomePage__favs",children:s.map((function(e){return Object(i.jsx)(k,{hotel:e},e.hotelId)}))})]})},I=n(5),P=n(39),T=function(e){var t=e.type;return t?Object(i.jsx)("small",{id:"emailHelp",className:"form-text invalid",children:t.message}):Object(i.jsx)("small",{id:"emailHelp",className:"form-text system-text",children:"[system_text]"})},H=function(){var e=Object(j.d)(),t=Object(P.a)({mode:"onBlur"}),n=t.register,c=t.handleSubmit,a=t.formState.errors,r=Object(j.e)((function(e){return e.homepage.request})),s=r.location,o=r.date,l=r.days;return Object(i.jsxs)("form",{className:"d-flex flex-column align-end justify-between text-center",onSubmit:c((function(t){e({type:g,payload:t})})),children:[Object(i.jsxs)("div",{className:"input-group",children:[Object(i.jsx)("label",{className:"form-label",htmlFor:"username",children:"\u041b\u043e\u043a\u0430\u0446\u0438\u044f"}),Object(i.jsx)("input",Object(I.a)(Object(I.a)({},n("location",{required:"\u041b\u043e\u043a\u0430\u0446\u0438\u044f \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u0430",minLength:"\u0414\u043b\u0438\u043d\u0430 \u043b\u043e\u043a\u0430\u0446\u0438\u0438 \u0431\u043e\u043b\u044c\u0448\u0435 \u0442\u0440\u0435\u0445 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"})),{},{className:"form-control",type:"text",defaultValue:s,maxLength:19})),Object(i.jsx)(T,{type:null===a||void 0===a?void 0:a.location})]}),Object(i.jsxs)("div",{className:"input-group",children:[Object(i.jsx)("label",{className:"form-label",htmlFor:"password",children:"\u0414\u0430\u0442\u0430 \u0437\u0430\u0441\u0435\u043b\u0435\u043d\u0438\u044f"}),Object(i.jsx)("input",Object(I.a)(Object(I.a)({},n("date",{required:"\u0414\u0430\u0442\u0430 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u0430"})),{},{className:"form-control",type:"date",id:"date",defaultValue:o,min:(new Date).toISOString().split("T")[0]})),Object(i.jsx)(T,{type:null===a||void 0===a?void 0:a.date})]}),Object(i.jsxs)("div",{className:"input-group",children:[Object(i.jsx)("label",{className:"form-label",htmlFor:"username",children:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0434\u043d\u0435\u0439"}),Object(i.jsx)("input",Object(I.a)(Object(I.a)({},n("days",{required:"\u0414\u043d\u0438 \u0437\u0430\u0441\u0435\u043b\u0435\u043d\u0438\u044f \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u044b"})),{},{className:"form-control",type:"number",defaultValue:l,min:1,max:7})),Object(i.jsx)(T,{type:null===a||void 0===a?void 0:a.days})]}),Object(i.jsx)("button",{className:"btn btn-hotel btn-w100",type:"submit",children:"\u041d\u0430\u0439\u0442\u0438"})]})},A=n(54),C=n(28),L=n.n(C),z=n(38),q=function(){var e=Object(z.f)();return Object(i.jsxs)("div",{className:"Header",children:[Object(i.jsx)("h2",{children:"Simple Hotel Check"}),Object(i.jsxs)("div",{className:"d-flex align-center pointer",onClick:function(){L.a.remove("tokenUser"),e.push("".concat(p,"login"))},children:[Object(i.jsx)("button",{className:"btn-outline",children:"\u0412\u044b\u0439\u0442\u0438"}),Object(i.jsx)(r.b.Provider,{value:{color:"#41522E",className:"global-class-name"},children:Object(i.jsx)(A.a,{size:32})})]})]})},F=n(57),M=n(55),R=n.n(M),B=(n(47),n.p+"static/media/car1.b9017736.png"),U=n.p+"static/media/car2.d8412d00.png",V=n.p+"static/media/car3.6e508eab.png",G=function(e){return e.preventDefault()},X=[B,U,V,U,B,U,V].map((function(e,t){return Object(i.jsx)("img",{src:e,style:{width:"150px"},onDragStart:G,alt:t})})),J=function(){return Object(i.jsx)(R.a,{autoWidth:!0,mouseTracking:!0,items:X,controlsStrategy:"alternate",disableButtonsControls:!0,disableDotsControls:!0,infinite:!0})},W=n(56),Z=function(e){var t=e.color,n=void 0===t?"#41522E":t,c=e.size,a=void 0===c?"32px":c;return Object(i.jsx)(r.b.Provider,{value:{color:n,size:a},children:Object(i.jsx)("span",{children:Object(i.jsx)(W.a,{})})})},Q=function(e){for(var t=e.hotel,n=Object(j.d)(),c=Object(j.e)((function(e){return e.homepage.request})),a=c.date,r=c.days,s=t.hotelName,d=t.stars,u=t.priceAvg,O=t.hotelId,x=[],p=0;p<d;p++)x.push("gold");for(var h=5-x.length,f=0;f<h;f++)x.push("grey");var v=!1,g=Object(j.e)((function(e){return e.homepage.favs}));return g.forEach((function(e){e.hotelId===O&&(v=!0)})),Object(i.jsxs)("div",{className:"d-flex justify-between align-center",style:{borderBottom:"1px solid #ccc",paddingBottom:"10px "},children:[Object(i.jsxs)("div",{className:"d-flex align-center",children:[Object(i.jsx)("div",{style:{padding:"24px"},children:Object(i.jsx)(Z,{})}),Object(i.jsxs)("div",{children:[Object(i.jsx)("p",{style:{fontSize:"15px"},children:s}),Object(i.jsxs)("p",{children:[new Date(a).toLocaleDateString("ru-RU",b)," -- ",r," ",m(r)]}),x.map((function(e,t){return Object(i.jsx)(l,{color:e},e+t+(new Date).toLocaleString())}))]})]}),Object(i.jsxs)("div",{className:"d-flex flex-column align-end align-center",children:[Object(i.jsx)(o,{size:"24px",isFav:v,onClick:function(){return n({type:_,payload:t})}}),Object(i.jsxs)("p",{className:"text-muted",children:["price: ",Object(i.jsxs)("span",{className:"HomePage__price ml-2",children:[parseInt(u),"p"]})]})]})]})},Y=function(){return Object(i.jsx)("div",{className:"Loader",children:Object(i.jsxs)("div",{className:"lds-default",children:[Object(i.jsx)("div",{}),Object(i.jsx)("div",{}),Object(i.jsx)("div",{}),Object(i.jsx)("div",{}),Object(i.jsx)("div",{}),Object(i.jsx)("div",{}),Object(i.jsx)("div",{}),Object(i.jsx)("div",{}),Object(i.jsx)("div",{}),Object(i.jsx)("div",{}),Object(i.jsx)("div",{}),Object(i.jsx)("div",{})]})})},$=function(){var e=Object(j.e)((function(e){return e.homepage.loading})),t=Object(j.e)((function(e){return e.homepage.hotels})),n=Object(j.e)((function(e){return e.homepage.favs})),c=Object(j.e)((function(e){return e.homepage.request})),a=c.date,r=c.location;return Object(i.jsxs)("div",{children:[Object(i.jsxs)("div",{className:"d-flex justify-between",children:[Object(i.jsxs)("div",{className:"d-flex align-center",children:[Object(i.jsx)("h3",{className:"Main__header",children:"\u041e\u0442\u0435\u043b\u0438"}),Object(i.jsx)(F.a,{className:"ml-1",size:32}),Object(i.jsx)("h3",{className:"Main__header ml-1",children:r})]}),Object(i.jsx)("h3",{style:{fontSize:"24px",fontWeight:400,color:"#41522E"},children:new Date(a).toLocaleDateString("ru-RU",b)})]}),Object(i.jsx)(J,{}),Object(i.jsxs)("h3",{children:["\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u043e \u0432 \u0438\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435: ",n.length," \u0435\u0434."]}),Object(i.jsx)("div",{children:e?Object(i.jsx)(Y,{}):null!==t&&void 0!==t&&t.message||0===t.length?Object(i.jsx)("h1",{children:"\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"}):t.map((function(e){return Object(i.jsx)(Q,{hotel:e},e.hotelId)}))})]})},K=n(127),ee=function(){var e=Object(j.e)((function(e){return e.homepage.favs})),t=e.length,n=Object(j.e)((function(e){return e.homepage.page})),c=Object(j.d)();return Object(i.jsx)("div",{className:"row justify-center",children:Object(i.jsx)(K.a,{count:Math.ceil(t/3),page:n,onChange:function(e,t){return c({type:S,payload:t})},showFirstButton:!0,showLastButton:!0,sx:{marginY:3,marginX:"auto"}})})},te=function(){return Object(i.jsxs)("div",{className:"HomePage",children:[Object(i.jsx)(q,{}),Object(i.jsxs)("div",{className:"HomePage__grid container",children:[Object(i.jsx)("div",{className:"HomePage__filter HomePage__block",children:Object(i.jsx)(H,{})}),Object(i.jsx)("div",{className:"HomePage__main HomePage__block",children:Object(i.jsx)($,{})}),Object(i.jsxs)("div",{className:"HomePage__fav HomePage__block",children:[Object(i.jsx)(D,{}),Object(i.jsx)(ee,{})]})]})]})},ne=function(){var e=Object(z.f)();Object(c.useEffect)((function(){L.a.get("tokenUser")&&e.push(p)}),[]);var t=Object(P.a)({mode:"onBlur"}),n=t.register,a=t.handleSubmit,r=t.formState.errors;return Object(i.jsxs)("div",{className:"LoginPage",children:[Object(i.jsxs)("form",{className:"Hotel__form text-center",onSubmit:a((function(){L.a.set("tokenUser",Math.random().toString(36).substr(2),{expires:1}),e.push(p)})),children:[Object(i.jsx)("h3",{children:"Simple Hotel Check"}),Object(i.jsxs)("div",{className:"input-group",children:[Object(i.jsx)("label",{className:"form-label",htmlFor:"username",children:"\u041b\u043e\u0433\u0438\u043d"}),Object(i.jsx)("input",Object(I.a)(Object(I.a)({},n("login",{required:"\u041b\u043e\u0433\u0438\u043d \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u0435\u043d",pattern:{value:d,message:"Email pattern be like: example@test.com"}})),{},{defaultValue:"example@test.com",className:"form-control",type:"email"})),Object(i.jsx)(T,{type:null===r||void 0===r?void 0:r.login})]}),Object(i.jsxs)("div",{className:"input-group",children:[Object(i.jsx)("label",{className:"form-label",htmlFor:"password",children:"\u041f\u0430\u0440\u043e\u043b\u044c"}),Object(i.jsx)("input",Object(I.a)(Object(I.a)({},n("password",{required:"\u041f\u0430\u0440\u043e\u043b\u044c \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u0435\u043d",pattern:{value:u,message:"\u041c\u0438\u043d\u0438\u043c\u0443\u043c 8 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"}})),{},{defaultValue:"12345678",className:"form-control",type:"password",id:"password"})),Object(i.jsx)(T,{type:null===r||void 0===r?void 0:r.password})]}),Object(i.jsx)("button",{className:"btn btn-hotel btn-w100",type:"submit",children:"\u0412\u043e\u0439\u0442\u0438"})]}),Object(i.jsx)("div",{className:"LoginPage__bg"})]})},ce=(n(110),n(111),n(112),function(e){var t=e.children;return L.a.get("tokenUser")?t:Object(i.jsx)(z.a,{to:{pathname:"".concat(p,"login")}})}),ae=n(35),re=n.n(ae),se=n(31),ie=n(26),oe=n(59),le=n(21),je={hotels:[],loading:!0,favs:[],request:{location:"\u041c\u043e\u0441\u043a\u0432\u0430",date:(new Date).toISOString().split("T")[0],days:1},favMode:x,page:1},de=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:je,t=arguments.length>1?arguments[1]:void 0,n=t.type,c=t.payload;switch(n){case h:return Object(I.a)(Object(I.a)({},e),{},{hotels:c});case f:return Object(I.a)(Object(I.a)({},e),{},{loading:!0});case v:return Object(I.a)(Object(I.a)({},e),{},{loading:!1});case g:return Object(I.a)(Object(I.a)({},e),{},{request:c});case w:return Object(I.a)(Object(I.a)({},e),{},{favs:c});case y:return Object(I.a)(Object(I.a)({},e),{},{favMode:O});case N:return Object(I.a)(Object(I.a)({},e),{},{favMode:x});case E:return Object(I.a)(Object(I.a)({},e),{},{page:c});default:return e}},ue=Object(le.a)(),be=Object(ie.b)({homepage:de,router:Object(se.b)(ue)}),Oe=n(9),xe=n(10),pe=n.n(xe),me=n(15),he=n(17),fe=n(18),ve=function(){var e=Object(fe.a)(pe.a.mark((function e(t,n,c){var a;return pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://engine.hotellook.com/api/v2/cache.json?location=".concat(t,"&currency=rub&checkIn=").concat(n,"&checkOut=").concat(c,"&limit=5"));case 2:return a=e.sent,e.next=5,a.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t,n,c){return e.apply(this,arguments)}}(),ge=pe.a.mark(Ee),ye=pe.a.mark(ke),Ne=pe.a.mark(De),_e=pe.a.mark(Ie),we=pe.a.mark(Pe),Se=pe.a.mark(Te);function Ee(e){var t;return pe.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload,n.next=3,Object(me.b)({type:E,payload:t});case 3:case"end":return n.stop()}}),ge)}function ke(e){var t,n,c,a,r,s;return pe.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.payload,i.next=3,Object(me.c)((function(e){var t=e.homepage;return null===t||void 0===t?void 0:t.favs}));case 3:if(n=i.sent,c=t,a=n.findIndex((function(e){return e.hotelId===t.hotelId})),!(a<0)){i.next=16;break}if(r=Object(I.a)({},c),!(n.length<15)){i.next=13;break}return i.next=11,Object(me.b)({type:w,payload:[].concat(Object(Oe.a)(n),[r])});case 11:i.next=14;break;case 13:alert("\u0414\u043e\u0441\u0442\u0438\u0433\u043d\u0443\u0442 \u043b\u0438\u043c\u0438\u0442 \u0438\u0437\u0431\u0440\u0430\u043d\u043d\u044b\u0445 \u043e\u0442\u0435\u043b\u0435\u0439");case 14:i.next=19;break;case 16:return s=n.filter((function(e){return e.hotelId!==t.hotelId})),i.next=19,Object(me.b)({type:w,payload:s});case 19:case"end":return i.stop()}}),ye)}function De(){var e,t,n,c,a,r,s,i,o,l;return pe.a.wrap((function(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,Object(me.c)((function(e){return e.homepage}));case 2:return e=j.sent,t=e.request,n=t.location,c=t.date,a=t.days,r=new Date(c),(s=new Date).setDate(r.getDate()+parseInt(a)),i=r.toISOString().split("T")[0],o=s.toISOString().split("T")[0],j.next=12,Object(me.a)(ve.bind(null,n,i,o));case 12:return l=j.sent,j.next=15,Object(me.b)({type:h,payload:l});case 15:return j.next=17,Object(me.b)({type:v});case 17:case"end":return j.stop()}}),Ne)}function Ie(){var e,t,n,c,a,r,s,i,o,l;return pe.a.wrap((function(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,Object(me.b)({type:f});case 2:return j.next=4,Object(me.c)((function(e){return e.homepage}));case 4:return e=j.sent,t=e.request,n=t.location,c=t.date,a=t.days,r=new Date(c),(s=new Date).setDate(r.getDate()+parseInt(a)),i=r.toISOString().split("T")[0],o=s.toISOString().split("T")[0],j.next=14,Object(me.a)(ve.bind(null,n,i,o));case 14:return l=j.sent,j.next=17,Object(me.b)({type:h,payload:l});case 17:return j.next=19,Object(me.b)({type:v});case 19:case"end":return j.stop()}}),_e)}function Pe(){return pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(me.c)((function(e){return e.router.location.pathname}));case 2:if(e.sent!==p){e.next=6;break}return e.next=6,Object(me.a)(De);case 6:case"end":return e.stop()}}),we)}function Te(){return pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(me.e)(he.a,Pe);case 2:return e.next=4,Object(me.e)(g,Ie);case 4:return e.next=6,Object(me.d)(_,ke);case 6:return e.next=8,Object(me.d)(S,Ee);case 8:case"end":return e.stop()}}),Se)}var He=Object(oe.a)(),Ae="object"===typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}):ie.c,Ce=Object(ie.d)(be,Ae(Object(ie.a)(He)));He.run(Te);var Le=Ce;re.a.render(Object(i.jsx)(j.a,{store:Le,children:Object(i.jsx)(se.a,{history:ue,children:Object(i.jsxs)(z.d,{children:[Object(i.jsx)(z.b,{path:"/test-hotel-liis-v2/login",exact:!0,children:Object(i.jsx)(ne,{})}),Object(i.jsx)(z.b,{path:"/test-hotel-liis-v2/",exact:!0,children:Object(i.jsx)(ce,{children:Object(i.jsx)(te,{})})})]})})}),document.getElementById("root"))}},[[114,1,2]]]);
//# sourceMappingURL=main.77d56f1f.chunk.js.map